import struct
from pathlib import Path

CRC_TABLE_SIZE = 256

HASH_I: dict[int, str] = {
    0x884C7C39: "LUA/CORESTART.LUA",
    0xFA740BF4: "LUA/NETWORKGAMEEND.LUA",
    0x718A48CB: "SYSTEM/GAMERAM.BXI",
    0x23919A0D: "SYSTEM/GAMERAM/INTEGRATE.BXI",
    0x94FC6E45: "LUA/COMPONENTS/RAMINIT.LUA",
    0xA1CC022D: "NOWLOADINGDATA/NOWLOADING0.BXI",
    0x3811122F: "LUA/LOGO.LUA",
    0xB90EBF31: "SYSTEM/FONTDATA.BXI",
    0xC0A4EECD: "SYSTEM/FONTDEFAULT.BXI",
    0xD0DD90C8: "FONT/FONTNUMBER.BXI",
    0xA446AEDE: "SOUND/SE_BANK01.BXI",
    0x02399BF5: "LUA/NOWLOADING0.LUA",
    0xC0BA38F8: "NOWLOADINGDATA/NOWLOADING0/INTEGRATE.FRP",
    0x83BA7CC6: "NOWLOADINGDATA/NOWLOADING0/INTEGRATE.BXI",
    0x6A37B470: "SYSTEM/FONTDATA/FONTPICT.GIM",
    0xBDC186F8: "SYSTEM/FONTDATA/FONTPICT.BXI",
    0xF5B33ABC: "SYSTEM/FONTDEFAULT/FONTDEFAULT.PGF",
    0x7E11B044: "SYSTEM/FONTDEFAULT/FONTDEFAULT.BXI",
    0x26E5BC89: "FONT/FONTNUMBER/FONTNUMBER.GIM",
    0xF1138E01: "FONT/FONTNUMBER/FONTNUMBER.BXI",
    0x390DA824: "SOUND/SE_BANK01/INTEGRATE.FRP",
    0x7A0DEC1A: "SOUND/SE_BANK01/INTEGRATE.BXI",
    0x2527D518: "WIPE/INTEGRATE.FRP",
    0x66279126: "WIPE/INTEGRATE.BXI",
    0x45E219C3: "/FONTPICT.GIM",
    0x074183AF: "/FONTDEFAULT.PGF",
    0x41737534: "/FONTNUMBER.GIM",
    0xC63166A9: "FONT/FONTSTORY2.BXI",
    0x2F43D484: "CARD/SSIZE.BXI",
    0x7DA6A718: "DATABASE/DAYDATA.BXI",
    0x44699FF6: "FONT/FONTSTORY2/FONTSTORY2.PGF",
    0xCFCB150E: "FONT/FONTSTORY2/FONTSTORY2.BXI",
    0x5081D6ED: "CARD/SSIZE/INTEGRATE.FRP",
    0x138192D3: "CARD/SSIZE/INTEGRATE.BXI",
    0x35B43500: "DATABASE/DAYDATA/DAYDATAINFO.BXI",
    0x0BCB3B25: "/FONTSTORY2.PGF",
    0x44827928: "COMPONENTS/NAMEWINDOW.BXI",
    0x0CEAE98A: "DATABASE/DECKEDITINFO.BXI",
    0x638E13F9: "SYSTEM/UTILITYS.BXI",
    0xC2A406E9: "SOUND/BGM_018.BXI",
    0xF0953960: "LOGO/LOGO.GMO",
    0xC9337245: "LOGO/INTEGRATE.BXI",
    0x3FCCE0E5: "COMPONENTS/NAMEWINDOW/NAMEWINDOW.GMO",
    0xA49CC8AA: "COMPONENTS/NAMEWINDOW/NAMEWINDOW.BXI",
    0x8FCA7160: "DATABASE/DECKEDITINFO/DECKEDITINFO.BXI",
    0xD67850B9: "TITLES/INTEGRATE.FRP",
    0x95781487: "TITLES/INTEGRATE.BXI",
    0x149C89EB: "SYSTEM/UTILITYS/INTEGRATE.FRP",
    0x579CCDD5: "SYSTEM/UTILITYS/INTEGRATE.BXI",
    0x16F56FD2: "SOUND/BGM_018/BGM_018.AT3",
    0x14CE3391: "SOUND/BGM_018/BGM_018.BXI",
    0x44E3F745: "/LOGO.GMO",
    0x6F8B5822: "/NAMEWINDOW.GMO",
    0xB59397BF: "/BGM_018.AT3",
    0x13224EB4: "NOWLOADINGDATA/NOWLOADING6.BXI",
    0xE953B3CC: "LUA/NEWGAME.LUA",
    0x27B53A51: "LUA/NOWLOADING.LUA",
    0x071844BA: "NOWLOADINGDATA/NOWLOADING6/INTEGRATE.FRP",
    0x44180084: "NOWLOADINGDATA/NOWLOADING6/INTEGRATE.BXI",
    0x01C14EF3: "STORY/SPOTCOMMON.BXI",
    0xF290F52C: "COMPONENTS/MESSAGEWINDOW.BXI",
    0xC112CC4B: "STORY/SPOTCOMMON/POINTSTORYCHARA.GMO",
    0x93612F27: "STORY/SPOTCOMMON/INTEGRATE.BXI",
    0x182A1E98: "COMPONENTS/MESSAGEWINDOW/INTEGRATE.FRP",
    0x5B2A5AA6: "COMPONENTS/MESSAGEWINDOW/INTEGRATE.BXI",
    0xC0394D70: "/POINTSTORYCHARA.GMO",
    0x55B13855: "LUA/EVENT/EVENT0535.LUA",
    0x36FBDC6E: "STORY/SPOTBG/SPOTBG30.BXI",
    0xC4508A45: "STORY/SPOTBG/SPOTBG30/INTEGRATE.FRP",
    0x8750CE7B: "STORY/SPOTBG/SPOTBG30/INTEGRATE.BXI",
    0x0D275295: "STORY/SPOTBG/SPOTBG24.BXI",
    0x929B966E: "STORY/SPOTBG/SPOTBG24/INTEGRATE.FRP",
    0xD19BD250: "STORY/SPOTBG/SPOTBG24/INTEGRATE.BXI",
    0x22A42DB7: "STORY/EVENTBG/EVENTBG45.BXI",
    0xB5BE45A3: "STORY/EVENTBG/EVENTBG45/EVENTBG.GMO",
    0x2EEE6DEC: "STORY/EVENTBG/EVENTBG45/EVENTBG.BXI",
    0x642DADC2: "/EVENTBG.GMO",
    0xE6730EEA: "LUA/COMPONENTS/EVENTEARTHQUAKE.LUA",
    0xC835E623: "NOWLOADINGDATA/NOWLOADING5.BXI",
    0xF60B1E40: "LUA/CHARAMAKE.LUA",
    0x64C97A9B: "NOWLOADINGDATA/NOWLOADING5/INTEGRATE.FRP",
    0x27C93EA5: "NOWLOADINGDATA/NOWLOADING5/INTEGRATE.BXI",
    0x59AEE15E: "MENU/CHARAMAKE.BXI",
    0xFD62D65B: "DATABASE/DECK.BXI",
    0x7FF733EA: "DATABASE/OSKINFO.BXI",
    0x31A34D76: "SOUND/BGM_016.BXI",
    0xC8EA0E11: "MENU/CHARAMAKE/INTEGRATE.FRP",
    0x8BEA4A2F: "MENU/CHARAMAKE/INTEGRATE.BXI",
    0x4801729B: "DATABASE/DECK/INTEGRATE.BXI",
    0x4767100E: "DATABASE/OSKINFO/OSKINFO.BXI",
    0xC4CC0B10: "SOUND/BGM_016/BGM_016.AT3",
    0xC6F75753: "SOUND/BGM_016/BGM_016.BXI",
    0x4694DC20: "/BGM_016.AT3",
    0x34A06F86: "LUA/STORYPORTAL.LUA",
    0x8F5B36D9: "NOWLOADINGDATA/NOWLOADINGDATE.BXI",
    0xE79B2F28: "LUA/SPOTBOOT.LUA",
    0x8281DC52: "LUA/NOWLOADINGDATE.LUA",
    0xBC8EE087: "NOWLOADINGDATA/NOWLOADINGDATE/INTEGRATE.FRP",
    0xFF8EA4B9: "NOWLOADINGDATA/NOWLOADINGDATE/INTEGRATE.BXI",
    0x7DED6FBD: "SOUND/SE_BANK_STORY.BXI",
    0x3EF7ED8C: "SOUND/SE_BANK_STORY/INTEGRATE.FRP",
    0x7DF7A9B2: "SOUND/SE_BANK_STORY/INTEGRATE.BXI",
    0xEEC9DC53: "LUA/EVENT/EVENT0012.LUA",
    0x834D01EF: "SOUND/BGM_010.BXI",
    0x0C7988F9: "SOUND/BGM_010/BGM_010.AT3",
    0x0E42D4BA: "SOUND/BGM_010/BGM_010.BXI",
    0xF47A90B9: "/BGM_010.AT3",
    0xB2458A07: "STORY/SPOTBG/SPOTBG16.BXI",
    0x5C9D8873: "STORY/SPOTBG/SPOTBG16/INTEGRATE.FRP",
    0x1F9DCC4D: "STORY/SPOTBG/SPOTBG16/INTEGRATE.BXI",
    0xFE6BB42B: "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL.BXI",
    0x1E3ED115: "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL/INTEGRATE.FRP",
    0x5D3E952B: "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL/INTEGRATE.BXI",
    0xA385ECD2: "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL.BXI",
    0x4547668A: "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL/INTEGRATE.FRP",
    0x064722B4: "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL/INTEGRATE.BXI",
    0x5C2790CA: "LUA/EVENT/EVENT0014.LUA",
    0x899904FC: "STORY/SPOTBG/SPOTBG02.BXI",
    0x0A569458: "STORY/SPOTBG/SPOTBG02/INTEGRATE.FRP",
    0x4956D066: "STORY/SPOTBG/SPOTBG02/INTEGRATE.BXI",
    0x528EAC6B: "STORY/SPOTBG/SPOTBG01.BXI",
    0x6987AA79: "STORY/SPOTBG/SPOTBG01/INTEGRATE.FRP",
    0x2A87EE47: "STORY/SPOTBG/SPOTBG01/INTEGRATE.BXI",
    0x0CD3EA63: "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL.BXI",
    0x33A126EA: "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL/INTEGRATE.FRP",
    0x70A162D4: "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL/INTEGRATE.BXI",
    0x9DBA8A0A: "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL.BXI",
    0x4C6B317D: "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL/INTEGRATE.FRP",
    0x0F6B7543: "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL/INTEGRATE.BXI",
    0x23B9DBB0: "STORY/STORYCHARA/STORYCHARA02_FAR_POSE.BXI",
    0xEC53A0A1: "STORY/STORYCHARA/STORYCHARA02_FAR_POSE/INTEGRATE.FRP",
    0xAF53E49F: "STORY/STORYCHARA/STORYCHARA02_FAR_POSE/INTEGRATE.BXI",
    0x40B56B78: "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL.BXI",
    0x81E765C8: "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL/INTEGRATE.FRP",
    0xC2E721F6: "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL/INTEGRATE.BXI",
    0xCE3D5FD0: "LUA/EVENT/EVENT0016.LUA",
    0x0C92F209: "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL.BXI",
    0x68DA390F: "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL/INTEGRATE.FRP",
    0x2BDA7D31: "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL/INTEGRATE.BXI",
    0xE060E0F2: "STORY/SPOTBG/SPOTBG07.BXI",
    0xAE25D63B: "STORY/SPOTBG/SPOTBG07/INTEGRATE.FRP",
    0xED259205: "STORY/SPOTBG/SPOTBG07/INTEGRATE.BXI",
    0x00ABC69E: "STORY/SPOTBG/SPOTBG10.BXI",
    0x9B3FF431: "STORY/SPOTBG/SPOTBG10/INTEGRATE.FRP",
    0xD83FB00F: "STORY/SPOTBG/SPOTBG10/INTEGRATE.BXI",
    0xDBBC6E09: "STORY/SPOTBG/SPOTBG13.BXI",
    0xF8EECA10: "STORY/SPOTBG/SPOTBG13/INTEGRATE.FRP",
    0xBBEE8E2E: "STORY/SPOTBG/SPOTBG13/INTEGRATE.BXI",
    0xA96D877F: "STORY/SPOTBG/SPOTBG06.BXI",
    0x732A3749: "STORY/SPOTBG/SPOTBG06/INTEGRATE.FRP",
    0x302A7377: "STORY/SPOTBG/SPOTBG06/INTEGRATE.BXI",
    0x727A2FE8: "STORY/SPOTBG/SPOTBG05.BXI",
    0x10FB0968: "STORY/SPOTBG/SPOTBG05/INTEGRATE.FRP",
    0x53FB4D56: "STORY/SPOTBG/SPOTBG05/INTEGRATE.BXI",
    0x5A6ACCE0: "STORY/SPOTBG/SPOTBG08.BXI",
    0x46710D29: "STORY/SPOTBG/SPOTBG08/INTEGRATE.FRP",
    0x05714917: "STORY/SPOTBG/SPOTBG08/INTEGRATE.BXI",
    0x3B774865: "STORY/SPOTBG/SPOTBG04.BXI",
    0xCDF4E81A: "STORY/SPOTBG/SPOTBG04/INTEGRATE.FRP",
    0x8EF4AC24: "STORY/SPOTBG/SPOTBG04/INTEGRATE.BXI",
    0xC0946371: "STORY/SPOTBG/SPOTBG03.BXI",
    0xD759752A: "STORY/SPOTBG/SPOTBG03/INTEGRATE.FRP",
    0x94593114: "STORY/SPOTBG/SPOTBG03/INTEGRATE.BXI",
    0x2DD3D116: "STORY/SPOTBG/SPOTBG20.BXI",
    0xEBE7357F: "STORY/SPOTBG/SPOTBG20/INTEGRATE.FRP",
    0xA8E77141: "STORY/SPOTBG/SPOTBG20/INTEGRATE.BXI",
}
HASH: dict[str, int] = {
    "LUA/CORESTART.LUA": 0x884C7C39,
    "LUA/NETWORKGAMEEND.LUA": 0xFA740BF4,
    "SYSTEM/GAMERAM.BXI": 0x718A48CB,
    "SYSTEM/GAMERAM/INTEGRATE.BXI": 0x23919A0D,
    "LUA/COMPONENTS/RAMINIT.LUA": 0x94FC6E45,
    "NOWLOADINGDATA/NOWLOADING0.BXI": 0xA1CC022D,
    "LUA/LOGO.LUA": 0x3811122F,
    "SYSTEM/FONTDATA.BXI": 0xB90EBF31,
    "SYSTEM/FONTDEFAULT.BXI": 0xC0A4EECD,
    "FONT/FONTNUMBER.BXI": 0xD0DD90C8,
    "SOUND/SE_BANK01.BXI": 0xA446AEDE,
    "LUA/NOWLOADING0.LUA": 0x02399BF5,
    "NOWLOADINGDATA/NOWLOADING0/INTEGRATE.FRP": 0xC0BA38F8,
    "NOWLOADINGDATA/NOWLOADING0/INTEGRATE.BXI": 0x83BA7CC6,
    "SYSTEM/FONTDATA/FONTPICT.GIM": 0x6A37B470,
    "SYSTEM/FONTDATA/FONTPICT.BXI": 0xBDC186F8,
    "SYSTEM/FONTDEFAULT/FONTDEFAULT.PGF": 0xF5B33ABC,
    "SYSTEM/FONTDEFAULT/FONTDEFAULT.BXI": 0x7E11B044,
    "FONT/FONTNUMBER/FONTNUMBER.GIM": 0x26E5BC89,
    "FONT/FONTNUMBER/FONTNUMBER.BXI": 0xF1138E01,
    "SOUND/SE_BANK01/INTEGRATE.FRP": 0x390DA824,
    "SOUND/SE_BANK01/INTEGRATE.BXI": 0x7A0DEC1A,
    "WIPE/INTEGRATE.FRP": 0x2527D518,
    "WIPE/INTEGRATE.BXI": 0x66279126,
    "/FONTPICT.GIM": 0x45E219C3,
    "/FONTDEFAULT.PGF": 0x074183AF,
    "/FONTNUMBER.GIM": 0x41737534,
    "FONT/FONTSTORY2.BXI": 0xC63166A9,
    "CARD/SSIZE.BXI": 0x2F43D484,
    "DATABASE/DAYDATA.BXI": 0x7DA6A718,
    "FONT/FONTSTORY2/FONTSTORY2.PGF": 0x44699FF6,
    "FONT/FONTSTORY2/FONTSTORY2.BXI": 0xCFCB150E,
    "CARD/SSIZE/INTEGRATE.FRP": 0x5081D6ED,
    "CARD/SSIZE/INTEGRATE.BXI": 0x138192D3,
    "DATABASE/DAYDATA/DAYDATAINFO.BXI": 0x35B43500,
    "/FONTSTORY2.PGF": 0x0BCB3B25,
    "COMPONENTS/NAMEWINDOW.BXI": 0x44827928,
    "DATABASE/DECKEDITINFO.BXI": 0x0CEAE98A,
    "SYSTEM/UTILITYS.BXI": 0x638E13F9,
    "SOUND/BGM_018.BXI": 0xC2A406E9,
    "LOGO/LOGO.GMO": 0xF0953960,
    "LOGO/INTEGRATE.BXI": 0xC9337245,
    "COMPONENTS/NAMEWINDOW/NAMEWINDOW.GMO": 0x3FCCE0E5,
    "COMPONENTS/NAMEWINDOW/NAMEWINDOW.BXI": 0xA49CC8AA,
    "DATABASE/DECKEDITINFO/DECKEDITINFO.BXI": 0x8FCA7160,
    "TITLES/INTEGRATE.FRP": 0xD67850B9,
    "TITLES/INTEGRATE.BXI": 0x95781487,
    "SYSTEM/UTILITYS/INTEGRATE.FRP": 0x149C89EB,
    "SYSTEM/UTILITYS/INTEGRATE.BXI": 0x579CCDD5,
    "SOUND/BGM_018/BGM_018.AT3": 0x16F56FD2,
    "SOUND/BGM_018/BGM_018.BXI": 0x14CE3391,
    "/LOGO.GMO": 0x44E3F745,
    "/NAMEWINDOW.GMO": 0x6F8B5822,
    "/BGM_018.AT3": 0xB59397BF,
    "NOWLOADINGDATA/NOWLOADING6.BXI": 0x13224EB4,
    "LUA/NEWGAME.LUA": 0xE953B3CC,
    "LUA/NOWLOADING.LUA": 0x27B53A51,
    "NOWLOADINGDATA/NOWLOADING6/INTEGRATE.FRP": 0x071844BA,
    "NOWLOADINGDATA/NOWLOADING6/INTEGRATE.BXI": 0x44180084,
    "STORY/SPOTCOMMON.BXI": 0x01C14EF3,
    "COMPONENTS/MESSAGEWINDOW.BXI": 0xF290F52C,
    "STORY/SPOTCOMMON/POINTSTORYCHARA.GMO": 0xC112CC4B,
    "STORY/SPOTCOMMON/INTEGRATE.BXI": 0x93612F27,
    "COMPONENTS/MESSAGEWINDOW/INTEGRATE.FRP": 0x182A1E98,
    "COMPONENTS/MESSAGEWINDOW/INTEGRATE.BXI": 0x5B2A5AA6,
    "/POINTSTORYCHARA.GMO": 0xC0394D70,
    "LUA/EVENT/EVENT0535.LUA": 0x55B13855,
    "STORY/SPOTBG/SPOTBG30.BXI": 0x36FBDC6E,
    "STORY/SPOTBG/SPOTBG30/INTEGRATE.FRP": 0xC4508A45,
    "STORY/SPOTBG/SPOTBG30/INTEGRATE.BXI": 0x8750CE7B,
    "STORY/SPOTBG/SPOTBG24.BXI": 0x0D275295,
    "STORY/SPOTBG/SPOTBG24/INTEGRATE.FRP": 0x929B966E,
    "STORY/SPOTBG/SPOTBG24/INTEGRATE.BXI": 0xD19BD250,
    "STORY/EVENTBG/EVENTBG45.BXI": 0x22A42DB7,
    "STORY/EVENTBG/EVENTBG45/EVENTBG.GMO": 0xB5BE45A3,
    "STORY/EVENTBG/EVENTBG45/EVENTBG.BXI": 0x2EEE6DEC,
    "/EVENTBG.GMO": 0x642DADC2,
    "LUA/COMPONENTS/EVENTEARTHQUAKE.LUA": 0xE6730EEA,
    "NOWLOADINGDATA/NOWLOADING5.BXI": 0xC835E623,
    "LUA/CHARAMAKE.LUA": 0xF60B1E40,
    "NOWLOADINGDATA/NOWLOADING5/INTEGRATE.FRP": 0x64C97A9B,
    "NOWLOADINGDATA/NOWLOADING5/INTEGRATE.BXI": 0x27C93EA5,
    "MENU/CHARAMAKE.BXI": 0x59AEE15E,
    "DATABASE/DECK.BXI": 0xFD62D65B,
    "DATABASE/OSKINFO.BXI": 0x7FF733EA,
    "SOUND/BGM_016.BXI": 0x31A34D76,
    "MENU/CHARAMAKE/INTEGRATE.FRP": 0xC8EA0E11,
    "MENU/CHARAMAKE/INTEGRATE.BXI": 0x8BEA4A2F,
    "DATABASE/DECK/INTEGRATE.BXI": 0x4801729B,
    "DATABASE/OSKINFO/OSKINFO.BXI": 0x4767100E,
    "SOUND/BGM_016/BGM_016.AT3": 0xC4CC0B10,
    "SOUND/BGM_016/BGM_016.BXI": 0xC6F75753,
    "/BGM_016.AT3": 0x4694DC20,
    "LUA/STORYPORTAL.LUA": 0x34A06F86,
    "NOWLOADINGDATA/NOWLOADINGDATE.BXI": 0x8F5B36D9,
    "LUA/SPOTBOOT.LUA": 0xE79B2F28,
    "LUA/NOWLOADINGDATE.LUA": 0x8281DC52,
    "NOWLOADINGDATA/NOWLOADINGDATE/INTEGRATE.FRP": 0xBC8EE087,
    "NOWLOADINGDATA/NOWLOADINGDATE/INTEGRATE.BXI": 0xFF8EA4B9,
    "SOUND/SE_BANK_STORY.BXI": 0x7DED6FBD,
    "SOUND/SE_BANK_STORY/INTEGRATE.FRP": 0x3EF7ED8C,
    "SOUND/SE_BANK_STORY/INTEGRATE.BXI": 0x7DF7A9B2,
    "LUA/EVENT/EVENT0012.LUA": 0xEEC9DC53,
    "SOUND/BGM_010.BXI": 0x834D01EF,
    "SOUND/BGM_010/BGM_010.AT3": 0x0C7988F9,
    "SOUND/BGM_010/BGM_010.BXI": 0x0E42D4BA,
    "/BGM_010.AT3": 0xF47A90B9,
    "STORY/SPOTBG/SPOTBG16.BXI": 0xB2458A07,
    "STORY/SPOTBG/SPOTBG16/INTEGRATE.FRP": 0x5C9D8873,
    "STORY/SPOTBG/SPOTBG16/INTEGRATE.BXI": 0x1F9DCC4D,
    "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL.BXI": 0xFE6BB42B,
    "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL/INTEGRATE.FRP": 0x1E3ED115,
    "STORY/STORYCHARA/STORYCHARA01_FAR_NOMAL/INTEGRATE.BXI": 0x5D3E952B,
    "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL.BXI": 0xA385ECD2,
    "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL/INTEGRATE.FRP": 0x4547668A,
    "STORY/STORYCHARA/STORYCHARA01_NEAR_NOMAL/INTEGRATE.BXI": 0x064722B4,
    "LUA/EVENT/EVENT0014.LUA": 0x5C2790CA,
    "STORY/SPOTBG/SPOTBG02.BXI": 0x899904FC,
    "STORY/SPOTBG/SPOTBG02/INTEGRATE.FRP": 0x0A569458,
    "STORY/SPOTBG/SPOTBG02/INTEGRATE.BXI": 0x4956D066,
    "STORY/SPOTBG/SPOTBG01.BXI": 0x528EAC6B,
    "STORY/SPOTBG/SPOTBG01/INTEGRATE.FRP": 0x6987AA79,
    "STORY/SPOTBG/SPOTBG01/INTEGRATE.BXI": 0x2A87EE47,
    "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL.BXI": 0x0CD3EA63,
    "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL/INTEGRATE.FRP": 0x33A126EA,
    "STORY/STORYCHARA/STORYCHARA10_FAR_NOMAL/INTEGRATE.BXI": 0x70A162D4,
    "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL.BXI": 0x9DBA8A0A,
    "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL/INTEGRATE.FRP": 0x4C6B317D,
    "STORY/STORYCHARA/STORYCHARA02_FAR_NOMAL/INTEGRATE.BXI": 0x0F6B7543,
    "STORY/STORYCHARA/STORYCHARA02_FAR_POSE.BXI": 0x23B9DBB0,
    "STORY/STORYCHARA/STORYCHARA02_FAR_POSE/INTEGRATE.FRP": 0xEC53A0A1,
    "STORY/STORYCHARA/STORYCHARA02_FAR_POSE/INTEGRATE.BXI": 0xAF53E49F,
    "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL.BXI": 0x40B56B78,
    "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL/INTEGRATE.FRP": 0x81E765C8,
    "STORY/STORYCHARA/STORYCHARA03_FAR_NOMAL/INTEGRATE.BXI": 0xC2E721F6,
    "LUA/EVENT/EVENT0016.LUA": 0xCE3D5FD0,
    "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL.BXI": 0x0C92F209,
    "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL/INTEGRATE.FRP": 0x68DA390F,
    "STORY/STORYCHARA/STORYCHARA09_FAR_NOMAL/INTEGRATE.BXI": 0x2BDA7D31,
    "STORY/SPOTBG/SPOTBG07.BXI": 0xE060E0F2,
    "STORY/SPOTBG/SPOTBG07/INTEGRATE.FRP": 0xAE25D63B,
    "STORY/SPOTBG/SPOTBG07/INTEGRATE.BXI": 0xED259205,
    "STORY/SPOTBG/SPOTBG10.BXI": 0x00ABC69E,
    "STORY/SPOTBG/SPOTBG10/INTEGRATE.FRP": 0x9B3FF431,
    "STORY/SPOTBG/SPOTBG10/INTEGRATE.BXI": 0xD83FB00F,
    "STORY/SPOTBG/SPOTBG13.BXI": 0xDBBC6E09,
    "STORY/SPOTBG/SPOTBG13/INTEGRATE.FRP": 0xF8EECA10,
    "STORY/SPOTBG/SPOTBG13/INTEGRATE.BXI": 0xBBEE8E2E,
    "STORY/SPOTBG/SPOTBG06.BXI": 0xA96D877F,
    "STORY/SPOTBG/SPOTBG06/INTEGRATE.FRP": 0x732A3749,
    "STORY/SPOTBG/SPOTBG06/INTEGRATE.BXI": 0x302A7377,
    "STORY/SPOTBG/SPOTBG05.BXI": 0x727A2FE8,
    "STORY/SPOTBG/SPOTBG05/INTEGRATE.FRP": 0x10FB0968,
    "STORY/SPOTBG/SPOTBG05/INTEGRATE.BXI": 0x53FB4D56,
    "STORY/SPOTBG/SPOTBG08.BXI": 0x5A6ACCE0,
    "STORY/SPOTBG/SPOTBG08/INTEGRATE.FRP": 0x46710D29,
    "STORY/SPOTBG/SPOTBG08/INTEGRATE.BXI": 0x05714917,
    "STORY/SPOTBG/SPOTBG04.BXI": 0x3B774865,
    "STORY/SPOTBG/SPOTBG04/INTEGRATE.FRP": 0xCDF4E81A,
    "STORY/SPOTBG/SPOTBG04/INTEGRATE.BXI": 0x8EF4AC24,
    "STORY/SPOTBG/SPOTBG03.BXI": 0xC0946371,
    "STORY/SPOTBG/SPOTBG03/INTEGRATE.FRP": 0xD759752A,
    "STORY/SPOTBG/SPOTBG03/INTEGRATE.BXI": 0x94593114,
    "STORY/SPOTBG/SPOTBG20.BXI": 0x2DD3D116,
    "STORY/SPOTBG/SPOTBG20/INTEGRATE.FRP": 0xEBE7357F,
    "STORY/SPOTBG/SPOTBG20/INTEGRATE.BXI": 0xA8E77141,
}

LBA_SIZE = 0x800
_FINAL_LBA = 367648

crc_table: int = []

for i in range(CRC_TABLE_SIZE):
    temp = i << 24

    for j in range(8):
        if (temp & 0x80000000) == 0:
            temp <<= 1
        else:
            temp <<= 1
            temp ^= 0x4C11DB7
    crc_table.append(temp)


def calc_crc(input: str) -> int:
    hash = 0

    for b in input.encode():
        hash = (hash << 8) ^ crc_table[((hash >> 24) & 0xFF) ^ b]

    return ~hash & 0xFFFFFFFF


Path("FINAL/").mkdir(parents=True, exist_ok=True)

header = open("_FINAL.BRH", "rb")
with header:
    count_1, _ = struct.unpack("<2I", header.read(8))
    hashes = struct.unpack(f"<{count_1}I", header.read(count_1*4))
    offsets = struct.unpack(f"<{count_1}I", header.read(count_1*4))
    sizes = struct.unpack(f"<{count_1}I", header.read(count_1*4))

body = open("__FINAL.BRP", "rb")
with body:
    for i in range(count_1):
        hash = hashes[i]
        off = offsets[i]
        body.seek(off)
        if hash in HASH_I:
            p = Path(f"FINAL/{HASH_I[hash]}")
            p.parent.mkdir(parents=True, exist_ok=True)
            with open(p, "wb") as f:
                f.write(body.read(sizes[i]))
        else:
            p = Path(f"FINAL/UNKNOWN/${hash:08X}")
            p.parent.mkdir(parents=True, exist_ok=True)
            with open(p, "wb") as f:
                f.write(body.read(sizes[i]))


# print("HASH_I = {")
# for f in HASHES:
#     h = calc_crc(f)
#     print(f"0x{h:08X}:\"{f}\",")
# print("}")
# print("HASH = {")
# for f in HASHES:
#     h = calc_crc(f)
#     print(f"\"{f}\":0x{h:08X},")
# print("}")
